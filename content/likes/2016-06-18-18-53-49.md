+++
date = 2016-06-18T18:53:49+00:00
path = "/likes/2016-06-18-18-53-49"

[extra]
client_id = ["https://micropublish.herokuapp.com"]
syndication = ["https://twitter.com/notenoughneon/status/742489560962060290"]

[[extra.like_of]]
author = "http://notenoughneon.com"
name = "Building a DSL for the indieweb"
published = 2016-06-13T22:43:16+00:00
type = "entry"
url = "http://notenoughneon.com/2016/6/13/building-a-dsl-for-the-indieweb"

[extra.like_of.content]
text = "mf-obj is a library I created while writing skein. I'm also using it in thready. It's an object oriented abstraction on top of the MF2 parser that understands things like posts and authors. Some of the functions it provides are: parsing comments and reply contexts, implementing the authorship algorithm, and determining post types.A cool trick I discovered is that I can use the node REPL to create an admin console by leveraging terse mf-obj expressions. Instead of designing a whole UI, this took justÂ 1 line of code. Below are some example use cases.The getAll() method returns an array of all the posts on my blog.&gt; var entries = site.getAll();Here's what one of these posts looks like:&gt; entries[]\nEntry {\n name: 'But at least you own your jokes now!',\n published: Wed Oct 15 2014 12:43:37 GMT-0700 (PDT),\n content: \n   { value: 'But at least you own your jokes now!',\n     html: 'But at least you own your jokes now!' },\n summary: null,\n url: 'http://notenoughneon.com/2014/10/15/1',\n author: \n   Card {\n     name: 'Emma Kuo',\n     photo: 'http://notenoughneon.com/m/emma-tw-73.jpeg',\n     url: 'http://notenoughneon.com',\n     uid: null },\n category: [],\n syndication: [],\n syndicateTo: [],\n replyTo: \n   Entry {\n     name: 'Surprisingly neither having my own website, nor POSSE have elevated the quality of my content above dumb jokes',\n     published: Wed Oct 15 2014 11:50:43 GMT-0700 (PDT),\n     content: \n       { value: 'Surprisingly neither having my own website, nor POSSE have elevated the quality of my content above dumb jokes',\n         html: 'Surprisingly neither having my own website, nor POSSE have elevated the quality of my content above dumb jokes\\n ' },\n     summary: null,\n     url: 'https://kylewm.com/note/2014/10/15/1/surprisingly-neither-having-my-own',\n     author: \n       Card {\n         name: 'Kyle Mahan',\n         photo: 'https://kylewm.com/static/img/users/kyle.jpg',\n         url: 'https://kylewm.com',\n         uid: null },\n     category: [],\n     syndication: [ 'https://twitter.com/kyle_wm/status/522459586221993985' ],\n     syndicateTo: [],\n     replyTo: null,\n     likeOf: null,\n     repostOf: null,\n     embed: null,\n     children: Map {} },\n likeOf: null,\n repostOf: null,\n embed: null,\n children: Map {} }I can get statistics such as post count:&gt; entries.length112Using filter(), I can count just the articles:&gt; entries.filter(e =&gt; e.isArticle()).length4Or replies:&gt; entries.filter(e =&gt; e.isReply()).length18Using map(), I can list just the URL of the replies:&gt; entries.filter(e =&gt; e.isReply()).map(e =&gt; e.url)[ 'http://notenoughneon.com/2014/10/15/1',  'http://notenoughneon.com/2014/11/15/1',  'http://notenoughneon.com/2014/11/16/1',  'http://notenoughneon.com/2014/7/27/1',  'http://notenoughneon.com/2014/8/28/1',\n  ...Here's a more complex query. This is the URLs and reply count, sorted by descending reply count:&gt; entries.map(e =&gt; [e.getChildren().length, e.url]).sort((a,b) =&gt; b[] - a[])[ [ 14, 'http://notenoughneon.com/2016/6/7/2' ],  [ 11, 'http://notenoughneon.com/2016/6/4/1' ],  [ 11, 'http://notenoughneon.com/2016/5/29/purl-a-portable-content-store' ],  [ 9, 'http://notenoughneon.com/2015/1/16/1' ],  [ 8, 'http://notenoughneon.com/2015/5/15/1' ],\n  ...I can also search using regex, then list the names of those posts:&gt; entries.filter(e =&gt; e.name.match(/indieweb/)).map(e =&gt; e.name)[ 'Got an #indieweb feed reader running: http://notenoughneon.com/feed.php Its still pretty buggy.',  'Adding neonblog documentation on indiewebcamp.com',  'I have published mf-obj, a set of utility classes for working with #indieweb posts: https://www.npmjs.com/package/mf-obj',  'I\\'m demoing skein at #indieweb summit 2016!',  'Forgot to mention my #indieweb site is powered by skein. It\\'s open source: https://github.com/notenoughneon/skein',\n  ...This style of programming should look familiar if you've used jQuery or LINQ. But the admin console isn't just for querying. I can also update posts. Suppose there is a post that needs the \"indieweb\" tag added:&gt; var entry = site.get('http://notenoughneon.com/2014/7/26/1');\n&gt; entry.category.push('indieweb');\n&gt; site.update(entry);This is still a work in progress, and the last example would be better if it could be expressed as a one-liner. But this demonstrates a principle I call \"building for hackability.\" In the early stages of a project, you need to rapidly prototype and can't afford full fledged UIs. Having a good foundation that lends itself to DSLs will open up the opportunity for quick REPL based interfaces."

+++

<a href="https://brid.gy/publish/twitter" data-synd></a>