+++
date = 2018-07-06T13:00:04+00:00
path = "/likes/2018-07-06-13-00-04"
updated = 2018-07-06T13:07:26+00:00

[extra]
client_id = ["https://omnibear.com"]

[[extra.like_of]]
author = "https://aaronparecki.com/"
in-reply-to = "https://github.com/indieweb/indieauth/issues/19#issuecomment-400334959"
published = 2018-07-06T03:33:01+00:00
type = "entry"
url = "https://aaronparecki.com/2018/07/05/21/"

[extra.like_of.content]
text = "tl;dr The more I think about it, the more I think this parameter enables a use case that isn't really necessary. The me parameter in the code exchange step specifically allows for a token endpoint to be detached from both the Micropub endpoint and the authorization endpoint.\n\nFull details below.\n\nThe different use cases that are all supported right now:\n\nIntegrated Micropub/Token/Authorization Endpoints\n\nThis is the simplest case in terms of architecture, but the most amount of work for a developer. In this case, someone writes all three parts of the system. Since they are part of the same system, the mechanism by which the token endpoint validates authorization codes does not need to be standardized, it's all internal.\n\nBoth my website and the Wordpress IndieAuth plugin fall under this case.\n\nAuthorization Endpoint Service, Built-In Token and Micropub Endpoints\n\nIn this case, someone is building a CMS that includes a Micropub endpoint as well as a token endpoint. However, they want to speed up their development, so they use an authorization endpoint service such as indieauth.com.\n\nThe client sends the auth code to the token endpoint, and since the token endpoint is part of the CMS, it already knows the only place it can go to validate the auth code is the authorization endpoint service that it's configured to use. Therefore there is no need for the me parameter, which normally tells the token endpoint where to go to verify the auth code.\n\nAuthorization Endpoint and Token Endpoint Service\n\nSpecifically this case is where a service provides both an authorization endpoint and token endpoint. This is the quickest path to building a Micropub endpoint, since all you need to do is build out the Micropub endpoint itself, and when any requests come in with a token, the endpoint goes and checks whether the token is valid by testing it against the token endpoint service.\n\nThis is a very common case with peoples' individual websites, as it offloads the development and maintenance of the security bits to a service. I provide these as a service at indieauth.com and tokens.indieauth.com.\n\nThe interesting thing though is that when a single service provides both, there is also no need for the me parameter at the code exchange step, since the token endpoint already knows where it needs to verify the authorization code since the code was issued by the same system.\n\nSeparate Authorization Endpoint and Token Endpoint Services\n\nThe only case where the me is needed is when the authorization endpoint and token endpoint are both used as services and they are separate services. Imagine a standalone token endpoint service: the job of this service is to verify authorization codes and issue access tokens, and later verify access tokens. In this situation, a request comes in with an unknown authorization code and it needs to verify it. Since it was not part of the system that issued the code, it needs to know how to verify it. Right now, this is enabled because this request also includes the me parameter, so the token endpoint goes and looks up the user's authorization endpoint and verifies the code there.\n\nThe thing I'm realizing though is that this is really quite an edge case, and one that I don't think is actually very important. Typically someone who is building a Micropub endpoint themselves will first start by using an authorization/token endpoint service, and there is no benefit to them if those are two separate services. In fact it's probably easier if they are just part of the same system since it's less moving parts to think about at this stage.\n\nLater, that person can decide they want to take over issuing tokens, but still don't want to build out the UI of an authorization service. At this point, they fall under the second use case above. They build out a token endpoint into their software, and since they're using the authorization endpoint service they know where to verify authorization codes.\n\nOn the other end of the spectrum, you have people who build the whole thing out themselves, like my website and the Wordpress plugin. In these cases the me is completely irrelevant in the code exchange step.\n\nThe particular situation that the me enables is using a separate service for the authorization and token endpoints, and I can't think of a case where that is actually important."

+++

